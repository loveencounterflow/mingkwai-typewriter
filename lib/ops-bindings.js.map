{
  "version": 3,
  "file": "ops-bindings.js",
  "sourceRoot": "..",
  "sources": [
    "src/ops-bindings.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\n############################################################################################################\n# CND                       = require 'cnd'\n# rpr                       = CND.rpr\n# badge                     = '明快打字机/OPS-BINDINGS'\n# debug                     = CND.get_logger 'debug',     badge\n# alert                     = CND.get_logger 'alert',     badge\n# whisper                   = CND.get_logger 'whisper',   badge\n# warn                      = CND.get_logger 'warn',      badge\n# help                      = CND.get_logger 'help',      badge\n# urge                      = CND.get_logger 'urge',      badge\n# info                      = CND.get_logger 'info',      badge\nPD                        = require 'pipedreams'\nKEYS                      = require './keys'\nXE                        = require './xemitter'\n\n\n#===========================================================================================================\n# KEY BINDINGS\n#-----------------------------------------------------------------------------------------------------------\n@_cm_keymap_move = ( cm, editor_method_name, candidates_method ) ->\n  try\n    return CodeMirror.commands[ editor_method_name ] cm unless S.focus_is_candidates\n    return candidates_method.apply @\n  catch error\n    alert \"when trying to call `CodeMirror.commands.#{editor_method_name}`, an error was thrown\"\n    throw error\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n### TAINT the defaults for cursor moves are taken from\n* public/codemirror/src/edit/commands.js\n* public/codemirror/keymap/sublime.js\nit would be advantageous to derive them somehow from the source or the running instance\n###\n@move_right         = ( cm ) -> @_cm_keymap_move cm, 'goCharRight', => @_select_delta_candidate { lnr: +1, }\n@move_left          = ( cm ) -> @_cm_keymap_move cm, 'goCharLeft',  => @_select_delta_candidate { lnr: -1, }\n@move_nxtline_first = ( cm ) -> @_cm_keymap_move cm, 'defaultTab',  => @_select_delta_candidate { lcol: 'first', lrow: +1, }\n@move_prvline_first = ( cm ) -> @_cm_keymap_move cm, 'indentLess',  => @_select_delta_candidate { lcol: 'first', lrow: -1, }\n@move_up            = ( cm ) -> @_cm_keymap_move cm, 'goLineUp',    => @log '######### move_up'\n@move_down          = ( cm ) -> @_cm_keymap_move cm, 'goLineDown',  => @log '######### move_down'\n@move_to_home       = ( cm ) -> @_cm_keymap_move cm, 'goLineStartSmart', => @_select_delta_candidate { lrow: 0, lcol: 'first', }\n@move_to_end        = ( cm ) -> @_cm_keymap_move cm, 'goLineEnd',  => @_select_delta_candidate { lrow: 0, lcol: 'last',  }\n\n#-----------------------------------------------------------------------------------------------------------\n@set_codemirror_keybindings = ->\n  mktw_keymap =\n    'Left':       ( cm ) => @move_left                 cm\n    'Right':      ( cm ) => @move_right                cm\n    'Up':         ( cm ) => @move_up                   cm\n    'Down':       ( cm ) => @move_down                 cm\n    'Tab':        ( cm ) => @move_nxtline_first        cm\n    'Shift-Tab':  ( cm ) => @move_prvline_first        cm\n    'Home':       ( cm ) => @move_to_home              cm\n    'End':        ( cm ) => @move_to_end               cm\n    'Space':      ( cm ) => @insert_space_or_selection cm\n    'Ctrl-M':     ( cm ) => @cm_mark_tsrs()\n    'Ctrl-0':     ( cm ) => @cm_set_tsrs 0\n    'Ctrl-1':     ( cm ) => @cm_set_tsrs 1\n    'Ctrl-2':     ( cm ) => @cm_set_tsrs 2\n    'Ctrl-3':     ( cm ) => @cm_set_tsrs 3\n    'Ctrl-4':     ( cm ) => @cm_set_tsrs 4\n  #.........................................................................................................\n  S.codemirror.editor.addKeyMap mktw_keymap\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@set_codemirror_event_bindings = ->\n  S.codemirror.editor.on 'cursorActivity', ( cm, change ) => @emit_transcribe_event()\n  #.........................................................................................................\n  ### Emit the `change` object that comes from a CM `inputRead` event: ###\n  S.codemirror.editor.on 'inputRead', ( cm, change ) =>\n    XE.emit @input_event_from_change_object change\n  #.........................................................................................................\n  ### Emit the `change` object that results from a CM `chnage/+delete` event, except `ignore_delete` is\n  active: ###\n  S.codemirror.editor.on 'change', ( cm, change ) =>\n    ### TAINT when inserting results, will there be a change event? ###\n    return null unless change.origin is '+delete'\n    ### ignore event if it has been generated: ###\n    if S.ignore_delete > 0\n      S.ignore_delete += -1\n      return null\n    XE.emit @input_event_from_change_object change\n  #.........................................................................................................\n  ### Adjust `ignore_delete` counter: ###\n  XE.listen_to '^ignore-delete', =>\n    S.ignore_delete += +1\n  #.........................................................................................................\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@set_app_keybindings = ->\n  KEYS.bind 'alt',      @, @show_or_hide_menu_bar\n  KEYS.bind 'shift',    @, @toggle_focusframe\n  KEYS.bind 'ctrl+s',   @, @save_document\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@set_xe_event_bindings = ->\n  XE.listen_to_all                      @, @log_almost_all_events\n  XE.listen_to '^candidates',           @, @display_candidates\n  XE.listen_to '^window-resize',        @, @index_candidates\n  XE.listen_to '^window-resize',        @, @adjust_focusframe\n  # XE.listen_to '^select-transcriptor',  @, @select_transcriptor\n  XE.listen_to '^transcribe',           @, @dispatch_transcribe_event\n\n#-----------------------------------------------------------------------------------------------------------\n@set_dom_event_bindings = ->\n  ### TAINT won't work when panes are shifted (probably) ###\n  ( jQuery window ).on 'resize', => XE.emit PD.new_event '^window-resize'\n\n\n\n\n"
  ]
}